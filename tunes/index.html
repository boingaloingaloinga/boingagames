<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>BoingaTunes</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  :root {
    --blue-dark: #0b1b2b;
    --blue-medium: #13385a;
    --blue-light: #1f5fa3;
    --text: #f2f6ff;
    --text-dim: #b9c9e0;
  }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto;
    background: var(--blue-dark);
    color: var(--text);
    height: 100vh;
    display: flex;
    flex-direction: column;
  }

  header {
    display: flex;
    align-items: center;
    background: var(--blue-medium);
    padding: 14px 20px;
    font-size: 1.2rem;
    font-weight: 600;
    box-shadow: 0 2px 4px rgba(0,0,0,0.4);
  }
  header button {
    margin-right: 10px;
    background: none;
    border: none;
    color: var(--text);
    font-size: 1.3rem;
    cursor: pointer;
  }

  #content {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
  }

  .album-card {
    background: var(--blue-medium);
    border-radius: 12px;
    padding: 15px;
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .album-card:hover {
    background: var(--blue-light);
  }
  .album-card img {
    width: 80px;
    height: 80px;
    border-radius: 8px;
    margin-right: 15px;
    object-fit: cover;
  }
  .album-info h3 {
    margin: 0;
    font-size: 1.1rem;
  }
  .album-info p {
    margin: 3px 0 0;
    color: var(--text-dim);
    font-size: 0.9rem;
  }

  .album-view img {
    width: 200px;
    height: 200px;
    object-fit: cover;
    border-radius: 12px;
    display: block;
    margin: 20px auto;
  }
  .track {
    background: var(--blue-medium);
    padding: 12px 15px;
    border-radius: 8px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .track:hover {
    background: var(--blue-light);
  }

  /* bottom player */
  #player-bar {
    background: var(--blue-medium);
    padding: 10px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-top: 1px solid #0a1420;
  }
  #player-info {
    display: flex;
    align-items: center;
    width: 100%;
    max-width: 600px;
  }
  #player-info img {
    width: 50px;
    height: 50px;
    border-radius: 6px;
    margin-right: 12px;
    object-fit: cover;
  }
  #player-text {
    flex: 1;
  }
  #player-text h4 {
    margin: 0;
    font-size: 0.95rem;
  }
  #player-text p {
    margin: 2px 0 0;
    font-size: 0.8rem;
    color: var(--text-dim);
  }

  #controls {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 8px;
  }
  #controls button {
    background: var(--blue-light);
    border: none;
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
  }

  #progress-container {
    position: relative;
    width: 100%;
    max-width: 600px;
    height: 6px;
    background: #0a2036;
    border-radius: 3px;
    margin-top: 8px;
    cursor: pointer;
  }
  #progress {
    position: absolute;
    height: 6px;
    background: var(--blue-light);
    border-radius: 3px;
    width: 0%;
  }
</style>
</head>
<body>
  <header>
    <button id="home-btn" style="display:none;">üè†</button>
    <span id="header-title">BoingaTunes</span>
  </header>

  <div id="content"></div>

  <div id="player-bar">
    <div id="player-info">
      <img id="cover" src="" alt="">
      <div id="player-text">
        <h4 id="song-title">No song playing</h4>
        <p id="song-artist"></p>
      </div>
    </div>

    <div id="controls">
      <button id="back10">‚è™ 10s</button>
      <button id="playpause">‚ñ∂Ô∏è</button>
      <button id="forward10">‚è© 10s</button>
    </div>

    <div id="progress-container">
      <div id="progress"></div>
    </div>

    <audio id="audio"></audio>
  </div>

<script>
const albums = ["curious.json"]; // later you can add more album JSONs here
const content = document.getElementById('content');
const headerTitle = document.getElementById('header-title');
const homeBtn = document.getElementById('home-btn');

const audio = document.getElementById('audio');
const playPauseBtn = document.getElementById('playpause');
const back10Btn = document.getElementById('back10');
const forward10Btn = document.getElementById('forward10');
const progressContainer = document.getElementById('progress-container');
const progress = document.getElementById('progress');
const coverEl = document.getElementById('cover');
const titleEl = document.getElementById('song-title');
const artistEl = document.getElementById('song-artist');

let currentAlbumData = null;

async function loadHome() {
  headerTitle.textContent = "BoingaTunes";
  homeBtn.style.display = "none";
  content.innerHTML = "<h2>Albums</h2>";

  const albumList = [];
  for (const file of albums) {
    try {
      const res = await fetch(file);
      const data = await res.json();
      albumList.push(data);
    } catch (err) {
      console.error("Error loading", file, err);
    }
  }

  albumList.sort((a,b)=>a.album.localeCompare(b.album));

  albumList.forEach(a=>{
    const card = document.createElement('div');
    card.className = "album-card";
    card.innerHTML = `
      <img src="${a.cover}" alt="">
      <div class="album-info">
        <h3>${a.album}</h3>
        <p>${a.artist}</p>
      </div>`;
    card.addEventListener('click', ()=>showAlbum(a));
    content.appendChild(card);
  });
}

function showAlbum(album) {
  currentAlbumData = album;
  headerTitle.textContent = album.album;
  homeBtn.style.display = "inline";
  content.innerHTML = `
    <div class="album-view">
      <img src="${album.cover}" alt="${album.album}">
      <h2 style="text-align:center;">${album.album}</h2>
      <p style="text-align:center; color:var(--text-dim);">${album.artist}</p>
      <div id="trackList"></div>
    </div>
  `;

  const trackList = document.getElementById('trackList');
  album.tracks.forEach(t=>{
    const div = document.createElement('div');
    div.className = 'track';
    div.textContent = t.title;
    div.dataset.audio = t.audio;
    div.dataset.cover = album.cover;
    div.dataset.artist = t.artist || album.artist;
    div.addEventListener('click', ()=>{
      loadTrack(div.dataset.audio, t.title, div.dataset.artist, div.dataset.cover);
    });
    trackList.appendChild(div);
  });
}

function loadTrack(audioUrl, title, artist, cover) {
  audio.src = audioUrl;
  titleEl.textContent = title;
  artistEl.textContent = artist;
  coverEl.src = cover;
  audio.play();
  playPauseBtn.textContent = "‚è∏Ô∏è";
}

// bottom controls
playPauseBtn.addEventListener('click', ()=>{
  if (audio.paused) {
    audio.play();
    playPauseBtn.textContent = "‚è∏Ô∏è";
  } else {
    audio.pause();
    playPauseBtn.textContent = "‚ñ∂Ô∏è";
  }
});

back10Btn.addEventListener('click', ()=> audio.currentTime = Math.max(0, audio.currentTime - 10));
forward10Btn.addEventListener('click', ()=> audio.currentTime = Math.min(audio.duration, audio.currentTime + 10));

audio.addEventListener('timeupdate', ()=>{
  if (audio.duration) {
    progress.style.width = (audio.currentTime / audio.duration) * 100 + "%";
  }
});

progressContainer.addEventListener('click', e=>{
  const rect = progressContainer.getBoundingClientRect();
  const percent = (e.clientX - rect.left) / rect.width;
  audio.currentTime = percent * audio.duration;
});

homeBtn.addEventListener('click', loadHome);

// initial
loadHome();
</script>
</body>
</html>

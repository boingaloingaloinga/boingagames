<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>BoingaTunes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --blue-dark: #0b1b2b;
      --blue-medium: #13385a;
      --blue-light: #1f5fa3;
      --text: #f2f6ff;
      --text-dim: #b9c9e0;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto;
      background: var(--blue-dark);
      color: var(--text);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--blue-medium);
      padding: 0 16px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.4);
    }

    header h1 {
      font-size: 1.2rem;
      font-weight: 600;
    }

    #homeBtn {
      background: none;
      border: none;
      color: var(--text);
      cursor: pointer;
      font-size: 1.4rem;
    }

    main {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }

    .album-card {
      background: var(--blue-medium);
      border-radius: 10px;
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .album-card:hover { background: var(--blue-light); }

    .album-card img {
      width: 80px;
      height: 80px;
      border-radius: 6px;
      object-fit: cover;
    }

    .album-info {
      display: flex;
      flex-direction: column;
    }

    .album-info .name {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .album-info .artist {
      font-size: 0.9rem;
      color: var(--text-dim);
    }

    /* Album view */
    #albumView img {
      width: 240px;
      height: 240px;
      border-radius: 14px;
      object-fit: cover;
      margin: 0 auto 20px;
      display: block;
    }

    .track {
      padding: 12px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      cursor: pointer;
      transition: background 0.2s;
    }
    .track:hover { background: rgba(255,255,255,0.05); }

    /* Player bar */
    #playerBar {
      background: var(--blue-medium);
      height: 100px;
      border-top: 2px solid rgba(255,255,255,0.1);
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 0 20px;
    }

    .progress {
      width: 100%;
      height: 6px;
      background:#092033;
      border-radius:3px;
      overflow:hidden;
      margin-bottom:8px;
      cursor:pointer;
    }

    .bar {
      height:100%;
      background: var(--blue-light);
      width:0%;
    }

    .player-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .player-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .player-left img {
      width: 50px;
      height: 50px;
      border-radius: 6px;
      object-fit: cover;
    }

    .meta .title { font-size: 1rem; font-weight: 600; }
    .meta .artist { font-size: 0.8rem; color: var(--text-dim); }

    .buttons {
      display: flex;
      gap: 16px;
      font-size: 1.3rem;
    }

    button.control {
      background: none;
      border: none;
      color: var(--text);
      cursor: pointer;
      transition: color 0.2s, transform 0.2s;
    }

    button.control:hover {
      color: var(--blue-light);
      transform: scale(1.1);
    }
  </style>
</head>
<body>
  <header>
    <button id="homeBtn" title="Home">üè†</button>
    <h1>BoingaTunes</h1>
    <div></div>
  </header>

  <main id="mainContent">
    <!-- Home / Album list will appear here -->
  </main>

  <div id="playerBar">
    <div class="progress" id="progress">
      <div class="bar" id="bar"></div>
    </div>

    <div class="player-controls">
      <div class="player-left">
        <img id="cover" src="" alt="">
        <div class="meta">
          <div class="title" id="title">No song playing</div>
          <div class="artist" id="artist"></div>
        </div>
      </div>

      <div class="buttons">
        <button class="control" id="back10">‚è™</button>
        <button class="control" id="playPause">‚ñ∂</button>
        <button class="control" id="fwd10">‚è©</button>
      </div>
    </div>
    <audio id="audio"></audio>
  </div>

  <script>
    const main = document.getElementById('mainContent');
    const homeBtn = document.getElementById('homeBtn');

    let albums = [];
    let currentAlbum = null;
    let currentTrack = null;

    // Player elements
    const audio = document.getElementById('audio');
    const cover = document.getElementById('cover');
    const titleEl = document.getElementById('title');
    const artistEl = document.getElementById('artist');
    const bar = document.getElementById('bar');
    const playPause = document.getElementById('playPause');
    const back10 = document.getElementById('back10');
    const fwd10 = document.getElementById('fwd10');
    const progress = document.getElementById('progress');

    // Load all albums (you can expand later)
    Promise.all([
      fetch('curious.json').then(r => r.json())
    ])
      .then(results => {
        albums = results.sort((a,b)=>a.album.localeCompare(b.album));
        showHome();
      })
      .catch(err => {
        main.innerHTML = `<p style="text-align:center;color:white">Error loading albums.<br>${err}</p>`;
      });

    function showHome() {
      currentAlbum = null;
      main.innerHTML = '';
      albums.forEach((a,i) => {
        const card = document.createElement('div');
        card.className = 'album-card';
        card.innerHTML = `
          <img src="${a.tracks[0].cover}" alt="${a.album}">
          <div class="album-info">
            <div class="name">${a.album}</div>
            <div class="artist">${a.artist}</div>
          </div>
        `;
        card.onclick = ()=>showAlbum(i);
        main.appendChild(card);
      });
    }

    function showAlbum(index) {
      const a = albums[index];
      currentAlbum = a;
      main.innerHTML = `
        <div id="albumView">
          <img src="${a.tracks[0].cover}" alt="${a.album}">
          <h2 style="text-align:center;margin-bottom:10px">${a.album}</h2>
          <p style="text-align:center;color:var(--text-dim);margin-bottom:20px">${a.artist}</p>
        </div>
      `;
      a.tracks.forEach((t,i)=>{
        const tr = document.createElement('div');
        tr.className = 'track';
        tr.textContent = t.title;
        tr.onclick = ()=>playTrack(a, i);
        main.appendChild(tr);
      });
    }

    function playTrack(album, index) {
      const t = album.tracks[index];
      currentTrack = t;
      titleEl.textContent = t.title;
      artistEl.textContent = t.artist;
      cover.src = t.cover;
      audio.src = t.audio;
      audio.play();
      playPause.textContent = '‚è∏';
    }

    // Player controls
    playPause.onclick = () => {
      if (!audio.src) return;
      if (audio.paused) { audio.play(); playPause.textContent = '‚è∏'; }
      else { audio.pause(); playPause.textContent = '‚ñ∂'; }
    };
    back10.onclick = () => audio.currentTime = Math.max(0, audio.currentTime - 10);
    fwd10.onclick = () => audio.currentTime = Math.min(audio.duration, audio.currentTime + 10);

    // Progress updates + click-to-seek
    audio.addEventListener('timeupdate', ()=>{
      const p = (audio.currentTime / audio.duration) * 100;
      bar.style.width = (p || 0) + '%';
    });

    progress.addEventListener('click', (e)=>{
      if (!audio.duration) return;
      const rect = progress.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const percent = x / rect.width;
      audio.currentTime = percent * audio.duration;
    });

    audio.addEventListener('ended', ()=> playPause.textContent = '‚ñ∂');
    homeBtn.onclick = showHome;
  </script>
</body>
</html>
